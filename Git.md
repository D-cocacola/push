#Git介绍

* 什么是版本
  * 项目是递进式开发的，每次编码实现一个功能后，都可以备份（记录）一次
  * 备份的次数多了，将会形成很多历史记录
  * 每备份一次，或者每一个历史记录，就叫做一个版本
* 什么版本控制（管理）
  * 管理代码版本（历史记录）的工具
  * 可以将代码切换回历史的某个版本
  * 多人合作的时候，可以将每个程序员的代码合并到一起
* 版本管理软件的作用

形成历史记录

完成多人合作

版本管理软件的分类

集中式

代码的历史记录保存在一台中央服务器

优劣

优点

管理方便

操作简单

代码一致性高

缺点

对服务器性能要求高

必须联网

不适合开源开发

典型代表

SVN

分布式

每台客户机都是服务器

优劣

优点

适合分布式开发，每个个体都可以作为服务器

离线工作，不需要联网

分支创建灵活，速度快

适合开源开发

缺点

无

典型代表

Git

初步使用

安装Git软件

使用Git管理你的代码

打开代码文件夹

空白处，右键，选择“Git Bash Here”

在弹出的黑窗口中，执行“git init”初始化

初始化操作只需要做一次

初始化后，会出现一个隐藏的“.git”文件夹

可以写代码了

模拟几个文件

继续执行“git add .”命令

这一步表示代码将由Git开始管理了

继续执行“git commit -m '提交说明'”

这一步表示代码将被备份一次，形成一个历史记录

初次使用Git，会提示设置一个账号和邮件地址

1. 如果你有GitHub账号，那么使用你的GitHub账号和邮箱地址即可。

2. 如果你没有GitHub账号，那么随便设置一个，不会影响使用。

3. 设置命令会提示给我们：

git config --global user.name "xxx"
git config --global user.email "xxx"

4. 以后，如果你想修改这个账号和邮箱，还是使用这两个命令

5. 设置完成后，别忘记执行“git commit -m '提交说明'” ，因为刚刚还没有执行成功呢。

至此，你的代码相当于被备份了。

以后，如果你想继续对更改的代码再次做备份，那么继续执行“git add .” 和 “git commit -m '提交说明'” 即可。

提交的次数多了，则一个个历史记录就形成了。我们可以使用其他命令将代码切回到历史中的任意一个版本中。这就是Git的功能之一。

如果你希望查看有哪些历史版本，可以执行“git log”或“git log --oneline”命令

基本概念

三个区域

三个区域

工作区

存放代码文件夹就是工作区

暂存区

对代码执行过“git add .”操作之后，代码将被添加到暂存区

本地仓库

对代码执行过“git commit -m '提交说明'”之后，暂存区的代码将被提交到本地仓库区

说明

除工作区外，其他两个区域都是Git虚拟的，我们看不见摸不到

四种状态

四种状态

未跟踪

新建的文件，从未被Git管理过，则称这样的文件状态为未跟踪状态

已暂存

新建的或修改过的文件，执行“git add .”之后，代码将被添加到暂存区，则称这样的文件状态为已暂存状态

已修改

已暂存状态的文件，在工作区又被修改了，则称这样的文件状态为已修改状态

已提交

执行“git commit -m '提交说明'”之后，代码将被提交到仓库区，则称这样的文件状态为已提交

查看状态的命令

git status

Git基础

添加/提交

工作区-->暂存区

git add .

添加所有新文件和修改过的文件

git add 文件1 文件2 文件夹1 文件夹2 ......

添加指定的文件和文件夹

注意的是，指定的文件夹里面的内容会一起被添加

暂存区-->本地仓库

git commit -m '提交说明'

提交所有的已暂存的文件到本地仓库

git commit 文件1 文件2 文件夹1 文件夹2 ..... -m '提交说明'

提交指定文件（夹）到本地仓库

工作区-->暂存区和本地仓库

只有被Git管理过的文件才可以执行这个操作

未跟踪状态的文件不能执行这个操作

git commit -a -m '提交说明'

撤销回退

暂存区-->工作区

git checkout .

git checkout 文件1 文件2 文件夹1 文件夹2  ....

本地仓库-->暂存区

意思是重置暂存区的指定文件，与上一次commit保持一致，但是工作区不会更改

git reset 文件1 文件2 文件夹1 文件夹2 ....

git reset 版本号 <file>

恢复文件直接到指定的版本

本地仓库-->暂存区和工作区

git reset --hard

恢复暂存区和工作区的代码和最近一次提交一致

分支

意义

不破坏主线代码的正常运行，还能继续增加新的代码

基本命令

查看所有分支

git branch

创建分支

git branch 分支名

切换分支

git checkout 分支名

合并分支

git merge 分支名

删除分支

git branch -d 分支名

创建并直接切换分支

git checkout -b 分支名

合并分支

必要说明

如果需要将B分支的代码合并到A分支上，则需先切换到A分支，然后执行“git merge B”

快进模式合并

两个分支，一个分支没有提交，另一个分支有新的提交，则属于快进模式

这种合并一般比较简单，不会产生冲突

提交模式合并

两个分支A和B，都有新的提交，合并的时候，属于提交模式

这种合并比较麻烦，可能产生冲突。

冲突CONFLICT解决办法

有冲突的代码会以分割线分割开，方便我们辨别

自己试着手动调整代码来解决冲突

自己解决不了，则需要把提交两个分支的程序员叫到一起，商量并确定代码应该如何修改

冲突代码解决后，删除分割线，保存代码。添加、提交最终的结果即可

远程仓库

意义

发布（部署）项目代码

实现多人合作开发

常用的远程仓库

GitHub

GitLab

码云

使用说明

在GitHub网站注册账号并激活，备用

注意GitHub的邮件可能被当做垃圾邮件，收不到邮件最好到垃圾邮件中看看

两种情况

先把代码提交到本地仓库，然后推送到远程仓库

先创建远程仓库，然后克隆到本地继续开发

先本地，后远程

1. 本地的项目提交过很多次了

2. 创建一个远程仓库

不要勾选 "Initialize this repository with a README"

不要选择忽略文件

不要选择许可协议文件

按图做
(不要勾选 "Initialize this repository with a README", 不要选择忽略文件, 不要选择许可协议文件)



3. 复制远程仓库地址

4. 黑窗口执行 git remote add 别名 远程仓库地址

这一步表示关联远程仓库，为后续的推送做准备

比如：git remote add origin https://github.com/xxxx/xxxx.git

5. 黑窗口执行 git push -u 别名 本地分支名[:远程分支名]

首次推送，会弹出一个界面。让我们验证GitHub的账号和密码

这一步表示推送代码文件到远程仓库

比如：git push -u origin master:master

如果本地分支名和远程分支名相同，则可以省略远程分支名

6. 后续，继续本地开发，任何时候，都可以直接将本地仓库的代码推送到远程了

后面的推送命令，直接使用 git push 即可

只能把本地仓库区的代码推送到远程仓库

先远程，后本地

1. 创建一个远程仓库

可以勾选 "Initialize this repository with a README"

可以选择忽略文件

可以选择许可协议文件

2. 复制远程仓库地址

3. 克隆远程仓库到本地

执行 git clone 远程仓库地址

在哪里执行的这个命令，就会把远程仓库的代码克隆到哪里

4. 在克隆好的文件夹里，编写代码，然后添加提交

注意文件夹的切换

5. 直接执行 git push 推送到远程仓库

首次推送，会弹出一个界面。让我们验证GitHub的账号和密码

多人协作

步骤

1. 组织者先创建项目，并推送到远程仓库。总之得有一个远程仓库

2. 组织者邀请其他成员共同开发项目

1. 进入到项目的远程仓库中

2. 点击仓库中的 Settings

3. 点击左侧侧边栏的 Collaborators

4. 在右侧的输入框输入其他成员的名字，并点击 Add Collaborators 进行邀请

5. 其他成员会收到一封确认合作开发的邮件，并进行确认。至此所有人都有推送到远程仓库的权利了

3. 其他成员克隆该项目到本地

4. 重中之重，所有人，必须保证先拉后推的原则

因为是多人开发，作为其中一员，我们并不知道其他成员是否推送过最新的代码，所以我们必须先拉取远程仓库的代码，然后在进行推送

拉取代码的时候，如果出现冲突。则解决冲突后再提交，最后推送。

在推送代码前，必须先执行git pull拉取远程仓库的最新代码

然后在执行git push 推送你的代码到远程仓库

其他问题

遇到问题上网查
标记: 大笑

图形化管理界面

命令如果记不住，则使用图形化管理界面

点击鼠标

附录

https://backlog.com/git-tutorial/cn/

https://git-scm.com/book/zh/v2

分支主题 9

git init

初始化，产生一个.git隐藏文件

写点代码

默认文件在工作区

git add .

添加到暂存区

git commit -m '提交说明'

提交到仓库

git status

查看状态

git log

git log --oneline

查看历史记录
